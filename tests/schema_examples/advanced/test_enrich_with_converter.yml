# Test custom field converters (chinese_to_pinyin)
database: placeholder  # Will be replaced by test runner
default_model: gpt-4o-mini

sql_queries:
  all_docs: |
    SELECT rowid, sha1, * FROM documents
    ORDER BY rowid

enrichments:
  - name: extract_location
    description: "Extract location with pinyin conversion"
    model: gpt-4o-mini
    input:
      query: all_docs
      input_columns: ["raw_content"]
    output_table: locations
    schema:
      city: {type: "string", convert: "chinese_to_pinyin"}
      province: {type: "string", convert: "chinese_to_pinyin"}
      original_city: {type: "string"}
      original_province: {type: "string"}
    prompt: |
      Extract city and province from this Chinese document.
      Return city and province in Chinese.